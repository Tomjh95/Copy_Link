<!DOCTYPE html>
<html>
<head>
<title>Copy Link</title>
<script>
document.addEventListener("DOMContentLoaded", function () {
    const linkElement = document.querySelector("a");
    
    linkElement.addEventListener("click", function (event) {
        event.preventDefault(); // Prevent opening a new tab

        // Extract the 'link' parameter from the URL
        const url = new URL(window.location.href);
        const encodedLink = url.searchParams.get('link');
        const fullLink = decodeURIComponent(encodedLink); // Decode the link

        // Copy the link to the clipboard
        navigator.clipboard.writeText(fullLink).then(() => {
            alert('Lien copiÃ©'); // Show success message
            window.close(); // Attempt to close the tab
        }).catch(err => {
            console.error('Failed to copy:', err);
        });
    });
});
</script>
</head>
<body>
<!-- Clickable link that will not open a new tab -->
<a href="#" id="copy-link">Copier le lien</a>
</body>
</html>
