<!DOCTYPE html>
<html>
<head>
<title>Copy Link</title>
</head>
<body>
<script>
function copyLink() {
    // Retrieve the full encoded URL from the 'link' parameter
    const url = new URL(window.location.href);
    const encodedLink = url.searchParams.get('link');
    const fullLink = decodeURIComponent(encodedLink); // Decode the link

    // Copy the decoded full link to the clipboard
    navigator.clipboard.writeText(fullLink).then(() => {
        alert('Lien copiÃ©'); // Updated popup text
        window.close(); // Attempt to close the tab
    }).catch(err => {
        console.error('Failed to copy: ', err);
    });
}

// Trigger the function when the button is clicked
function onLoad() {
    copyLink();
}
</script>

<!-- Button to trigger copy action -->
<button onclick="onLoad()">Copier le lien</button>
</body>
</html>
